<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>RentRight - My Properties</title>
    <meta name="description" content="Morden Bootstrap HTML5 Template" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='img/favicon.ico') }}" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins/swiper-bundle.min.css') }}" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/vendor/bootstrap.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins/swiper-bundle.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins/glightbox.min.css') }}" />

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/table.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dark.css') }}" />

    <script>
      if (localStorage.getItem("theme-color") === "dark" || (!("theme-color" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
        document.documentElement.classList.add("dark");
      }
      if (localStorage.getItem("theme-color") === "light") {
        document.documentElement.classList.remove("dark");
      }
    </script>
  </head>

  <body>
    <div id="preloader"><div class="loader--border"></div></div>
    <div class="dashboard__page--wrapper">
      <div class="offcanvas__header">
        <div class="offcanvas__inner">
          <div class="offcanvas__logo">
            <a class="offcanvas__logo_link" href="{{ url_for('owner_dashboard') }}">
              <img class="light__logo" src="{{ url_for('static', filename='img/logo/nav-log.png') }}" alt="Logo-img" width="158" height="36" />
              <img class="dark__logo" src="{{ url_for('static', filename='img/logo/nav-log-white.png') }}" alt="Logo-img" width="158" height="36" />
            </a>
            <button class="offcanvas__close--btn" data-offcanvas>close</button>
          </div>

          <nav class="offcanvas__menu">
            <ul class="offcanvas__menu_ul">
              <li class="offcanvas__menu_li"><a class="offcanvas__menu_item" href="{{ url_for('index') }}">Home</a></li>
              <li class="offcanvas__menu_li"><a class="offcanvas__menu_item" href="{{ url_for('listing') }}">Listing</a></li>
              <li class="offcanvas__menu_li"><a class="offcanvas__menu_item" href="{{ url_for('rent_prediction') }}">Rent Prediction</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <div class="page__body--wrapper" id="dashbody__page--body__wrapper">
        <header class="header__section">
          <div class="main__header d-flex justify-content-between align-items-center"></div>
        </header>
        <main class="main__content_wrapper">
          <div class="dashboard__container dashboard__reviews--container">
            <div class="reviews__heading mb-30">
              <h2 class="reviews__heading--title">My Properties</h2>
              <p class="reviews__heading--desc">We are glad to see you again!</p>
            </div>
            <div class="properties__wrapper">
              <div class="properties__table table-responsive">
                <table class="properties__table--wrapper">
                  <thead>
                    <tr>
                      <th>Listing Title</th>
                      <th>Date published</th>
                      <th><span class="min-w-100">Status</span></th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% if properties %}
                    {% for property in properties %}
                    <tr>
                      <td>
                        <div class="properties__author d-flex align-items-center">
                          <div class="properties__author--thumb">
                            <img src="{{ url_for('static', filename='img/dashboard/properties-author1.png') }}" alt="img" />
                          </div>
                          <div class="reviews__author--text">
                            <h3 class="reviews__author--title">
                              <a href="{{ url_for('property_detail', property_id=property.id) }}">{{ property.title }}</a>
                            </h3>
                            <p class="reviews__author--subtitle">{{ property.address }}, {{ property.city }}</p>
                            <span class="properties__author--price">â‚¹{{ property.price|inr }}/mo</span>
                          </div>
                        </div>
                      </td>
                      <td><span class="reviews__date">{{ property.created_at.strftime('%d %b, %Y') }}</span></td>
                      <td><span class="status__btn {% if property.available %}active{% else %}pending{% endif %}">{% if property.available %}Active{% else %}Rented{% endif %}</span></td>
                      <td>
                        <div class="reviews__action--wrapper position-relative">
                          <button class="reviews__action--btn" aria-label="action button" type="button" aria-expanded="true" data-bs-toggle="dropdown">
                            <svg width="3" height="17" viewBox="0 0 3 17" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="1.5" cy="1.5" r="1.5" fill="currentColor" /><circle cx="1.5" cy="8.5" r="1.5" fill="currentColor" /><circle cx="1.5" cy="15.5" r="1.5" fill="currentColor" /></svg>
                          </button>
                          <ul class="dropdown-menu sold-out__user--dropdown" data-popper-placement="bottom-start">
                            <li><a href="{{ url_for('edit_property', property_id=property.id) }}">Edit</a></li>
                            <li>
                              <form action="{{ url_for('delete_property', property_id=property.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this property?');">
                                <button type="submit" class="dropdown-item">Remove</button>
                              </form>
                            </li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    {% endfor %}
                    {% else %}
                    <tr><td colspan="4">You have not listed any properties yet.</td></tr>
                    {% endif %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <button id="scroll__top"><svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="48" d="M112 244l144-144 144 144M256 120v292" /></svg></button>

    <script src="{{ url_for('serve_assets', filename='js/vendor/popper.js') }}" defer="defer"></script>
    <script src="{{ url_for('serve_assets', filename='js/vendor/bootstrap.min.js') }}" defer="defer"></script>
    <script src="{{ url_for('serve_assets', filename='js/plugins/swiper-bundle.min.js') }}"></script>
    <script src="{{ url_for('serve_assets', filename='js/plugins/glightbox.min.js') }}"></script>
    <script src="{{ url_for('serve_assets', filename='js/script.js') }}"></script>
  </body>
  </html>
